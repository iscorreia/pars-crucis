{{! Persona configuration window }}

<section class="persona-config">
  <h3>{{localize "PC.configPersona"}}</h3>
  <p>MESSAGE HERE</p>
  <h2>
    {{log system.parent}}
    <input
      class="actor-name_input"
      type="text"
      name="name"
      value="{{system.parent.name}}"
      placeholder="Nameless"
    />
  </h2>
  <div class="flexrow">
    Origem:
    <select name="system.info.origin">
      {{selectOptions config.origins selected=system.info.origin localize=true}}
    </select>
    / cultura:
    <select name="system.info.culture">
      {{selectOptions
        config.cultures
        selected=system.info.culture
        localize=true
      }}
    </select>
    / subcultura:
    <input
      type="String"
      data-dtype="String"
      name="system.info.subculture"
      value="{{system.info.subculture}}"
    />
    / persona:
    <select name="system.info.persona">
      {{selectOptions
        config.personas
        selected=system.info.persona
        localize=true
      }}
    </select>
  </div>
  <div class="att-config">
    {{#each system.attributes as |attribute obj|}}
      <div class="att-config-item">
        <h4>{{localize (concat "PC.attributes." obj ".abv")}}</h4>
        <input
          type="String"
          data-dtype="Number"
          name="system.attributes.{{@key}}.adjust"
          value="{{numberFormat attribute.adjust sign=true}}"
        /></div>
    {{/each}}
  </div>
  <div class="sub-config">
    {{#each system.subattributes as |sub obj|}}
      <div class="sub-config-item">
        <h4>{{localize (concat "PC.subattributes." obj ".abv")}}</h4>
        <input
          type="String"
          data-dtype="Number"
          name="system.subattributes.{{@key}}.adjust"
          value="{{numberFormat sub.adjust sign=true}}"
        />
      </div>
    {{/each}}
    <div class="sub-config-item">
      <h4>{{localize "PC.movement.abv"}}</h4>
      <div class="flexrow">
        <input
          name="system.movement.walk.adjust"
          type="String"
          value="{{numberFormat system.movement.walk.adjust sign=true}}"
          data-dtype="Number"
        />>
        <input
          name="system.movement.sprint.adjust"
          type="String"
          value="{{numberFormat system.movement.sprint.adjust sign=true}}"
          data-dtype="Number"
        /></div>
    </div>
    <div class="sub-config-item">
      <h4>{{localize "PC.luck"}}</h4>
      <input
        class="luck-max"
        name="system.luck.max"
        type="Number"
        value="{{system.luck.max}}"
        data-dtype="Number"
      />
    </div>
    {{#each system.minors as |minor obj|}}
      <div class="sub-config-item">
        <h4>{{localize (concat "PC.minors." obj ".abv")}}</h4>
        <input
          type="String"
          data-dtype="Number"
          name="system.minors.{{@key}}.adjust"
          value="{{numberFormat minor.adjust sign=true}}"
        />
      </div>
    {{/each}}
  </div>
  <div class="flexrow">
    {{#each config.categories as |category objs|}}
      <ul class="flexcol">
        {{#each (lookup @root.config objs) as |sk obj|}}
          {{#with (lookup @root.system.skills obj) as |skill|}}
            <li class="flexrow">
              <input
                class="favor-box"
                type="checkbox"
                data-dtype="Boolean"
                name="system.skills.{{obj}}.favored"
                {{checked skill.favored}}
              />
              {{localize sk.label}}{{#if skill.favorable}}!{{/if}}
              {{#if skill.favored}}
                <span>{{skill.xpSpent}}</span>
                <span>(-{{skill.xpDiscount}})</span>
              {{else}}
                <span>{{skill.xpSpent}}</span>
              {{/if}}
            </li>
          {{/with}}
        {{/each}}
      </ul>
    {{/each}}
  </div>
</section>